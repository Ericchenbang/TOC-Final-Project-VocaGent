<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Mind Map | Horizontal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mindmap.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="horizontal-mm-body">

    <div class="mm-app-wrapper">
        <header class="mm-header">
            <span class="badge">News Intelligence</span>
            <h1>News Structure Explorer</h1>
        </header>

        <div class="mindmap-viewport">
            <div class="interactive-tree">
                {% macro render_node(node, level=0) %}
                    <div class="mm-node level-{{ level }} {% if node.children %}has-children{% endif %}">
                        <div class="node-wrapper" {% if node.children %}onclick="toggleNode(this)"{% endif %}>
                            <span class="node-icon">
                                {% if level == 0 %}üéØ{% elif node.children %}üìÇ{% else %}üìÑ{% endif %}
                            </span>
                            <span class="node-text">{{ node.text }}</span>
                            {% if node.children %}
                                <span class="toggle-indicator">Ôºã</span>
                            {% endif %}
                        </div>
                        
                        {% if node.children %}
                            <div class="child-group">
                                {% for child in node.children %}
                                    {{ render_node(child, level + 1) }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                {% endmacro %}

                <div class="tree-root">
                    {{ render_node(mindmap) }}
                </div>
            </div>
        </div>

        <div class="floating-nav">
            <a href="javascript:history.back()">Back</a>
            <a href="/">Home</a>
        </div>
    </div>

    <script>
    function toggleNode(element) {
        const parentDiv = element.parentElement;
        parentDiv.classList.toggle('is-expanded');
        
        const indicator = element.querySelector('.toggle-indicator');
        if (indicator) {
            indicator.textContent = parentDiv.classList.contains('is-expanded') ? 'Ôºç' : 'Ôºã';
        }
        if (parentDiv.classList.contains('is-expanded')) {
             element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }
    </script>
</body>
</html>